"use strict";(self.webpackChunkstreams_docs=self.webpackChunkstreams_docs||[]).push([[28],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=d(n),m=r,g=u["".concat(s,".").concat(m)]||u[m]||c[m]||i;return n?a.createElement(g,o(o({ref:t},p),{},{components:n})):a.createElement(g,o({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var d=2;d<i;d++)o[d]=n[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},3544:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var a=n(7462),r=(n(7294),n(3905));const i={sidebar_position:1},o="Getting Started",l={unversionedId:"mobile-sdk/android-native-sdk/getting-started",id:"mobile-sdk/android-native-sdk/getting-started",title:"Getting Started",description:"This SDK enables you to securely stream DRM-protected videos through your Android app.",source:"@site/docs/mobile-sdk/android-native-sdk/getting-started.md",sourceDirName:"mobile-sdk/android-native-sdk",slug:"/mobile-sdk/android-native-sdk/getting-started",permalink:"/docs/mobile-sdk/android-native-sdk/getting-started",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"mobileSdk",previous:{title:"Android Native SDK",permalink:"/docs/category/android-native-sdk"},next:{title:"Offline Downloads",permalink:"/docs/mobile-sdk/android-native-sdk/offline-downloads"}},s={},d=[{value:"Adding dependency",id:"adding-dependency",level:2},{value:"Using ProGuard",id:"using-proguard",level:3},{value:"Integrating player fragment",id:"integrating-player-fragment",level:2},{value:"Initializing Player And Starting Playback",id:"initializing-player-and-starting-playback",level:2}],p={toc:d};function c(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"getting-started"},"Getting Started"),(0,r.kt)("p",null,"This SDK enables you to securely stream DRM-protected videos through your Android app."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/testpress/sample-android-app"},"Sample Android App")),(0,r.kt)("h2",{id:"adding-dependency"},"Adding dependency"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"If you have a settings.gradle file in your project root, then you need to add the repositories in the settings.gradle inside dependencyResolutionManagement with the given path below. Else, this will go in build.gradle file in project root.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'repositories {\n    // other repo, e.g. google() or mavenCentral()\n    maven {\n        url "https://github.com/testpress/maven/raw/main/repo"\n    }\n}\n')),(0,r.kt)("p",null,"Then reference the library in the dependency section:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-groovy"},'dependencies {\n    implementation "com.tpstreams.player:player:1.0.14b"\n}\n')),(0,r.kt)("h3",{id:"using-proguard"},"Using ProGuard"),(0,r.kt)("p",null,"If you use ProGuard in your app, you might need to add the following rule to your ProGuard file."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-groovy"},"-keep class com.tpstream.player.** { *; }\n")),(0,r.kt)("h2",{id:"integrating-player-fragment"},"Integrating player fragment"),(0,r.kt)("p",null,"Drop a TpStreamPlayerFragment into your activity layout with an id. This is the fastest and easiest way to integrate the player into your application. TpStreamPlayerFragment includes a prebuilt UI for the player with ample features and functionality."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<androidx.fragment.app.FragmentContainerView\n    android:id="@+id/tpstream_player_fragment"\n    android:name="com.tpstream.player.TpStreamPlayerFragment"\n    android:layout_width="match_parent"\n    android:layout_height="wrap_content"\n    android:keepScreenOn="true"\n    tools:layout="@layout/fragment_tp_stream_player" />\n')),(0,r.kt)("p",null,"and receive its instance in your activity using findFragmentbyId()"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"playerFragment = supportFragmentManager.findFragmentById(R.id.tpstream_player_fragment) as TpStreamPlayerFragment\n")),(0,r.kt)("h2",{id:"initializing-player-and-starting-playback"},"Initializing Player And Starting Playback"),(0,r.kt)("p",null,"You can set listener class with onInitializationSuccess method and receive the player in the onInitializationSuccess callback."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'playerFragment.setOnInitializationListener(object: InitializationListener {\n    override fun onInitializationSuccess(player: TpStreamPlayer) {\n        Log.i(TAG, "onInitializationSuccess");\n        this.player = player\n    }\n})\n')),(0,r.kt)("p",null,"Once you have a player, you can start loading media onto it for playback. You'll need a TpInitParams object to specify which media to load along with your playback preferences."),(0,r.kt)("p",null,"A TpInitParams object needs videoId, ",(0,r.kt)("a",{parentName:"p",href:"/docs/server-api/access-token"},"accessToken")," and orgCode."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'val parameters = TpInitParams.Builder()\n    .setVideoId(videoId)\n    .setAccessToken(accessToken)\n    .setOrgCode("organization_id") //  app.tpstreams.com/api/v1/organizations_id/\n    .build()\nplayer.load(parameters)\n')),(0,r.kt)("p",null,"Final code will look like this"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_player)\n    playerFragment =\n        supportFragmentManager.findFragmentById(R.id.tpstream_player_fragment) asTpStreamPlayerFragment\n    playerFragment.setOnInitializationListener(object: InitializationListener {\n        override fun onInitializationSuccess(player: TpStreamPlayer) {\n            val parameters = TpInitParams.Builder()\n                .setVideoId(videoId)\n                .setAccessToken(accessToken)\n                .setOrgCode("organization_id")\n                .build()\n            player.load(parameters)\n        }\n    });\n}\n')),(0,r.kt)("p",null,"Call this below method to enable auto fullscreen on rotate"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"  playerFragment.enableAutoFullScreenOnRotate()\n")))}c.isMDXComponent=!0}}]);