"use strict";(self.webpackChunkstreams_docs=self.webpackChunkstreams_docs||[]).push([[6008],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>y});var n=r(7294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var c=n.createContext({}),l=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},p=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,i=e.mdxType,o=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=l(r),y=i,m=d["".concat(c,".").concat(y)]||d[y]||u[y]||o;return r?n.createElement(m,a(a({ref:t},p),{},{components:r})):n.createElement(m,a({ref:t},p))}));function y(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=r.length,a=new Array(o);a[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:i,a[1]=s;for(var l=2;l<o;l++)a[l]=r[l];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},7457:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var n=r(7462),i=(r(7294),r(3905));const o={sidebar_position:5},a="DRM License",s={unversionedId:"server-api/drm",id:"server-api/drm",title:"DRM License",description:"To play DRM protected videos, your player should request DRM licence from our URL.",source:"@site/docs/server-api/drm.md",sourceDirName:"server-api",slug:"/server-api/drm",permalink:"/docs/server-api/drm",draft:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"serverAPISidebar",previous:{title:"Folders",permalink:"/docs/server-api/folders"},next:{title:"Web Hooks",permalink:"/docs/server-api/webhooks"}},c={},l=[{value:"Usage:",id:"usage",level:3},{value:"Customize Widevine License:",id:"customize-widevine-license",level:3},{value:"Security Considerations:",id:"security-considerations",level:2}],p={toc:l};function u(e){let{components:t,...r}=e;return(0,i.kt)("wrapper",(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"drm-license"},"DRM License"),(0,i.kt)("p",null,"To play DRM protected videos, your player should request DRM licence from our URL."),(0,i.kt)("p",null,"This API requires ",(0,i.kt)("a",{parentName:"p",href:"/docs/video-embedding/authentication"},"access_token")," in query param for authentication."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"POST: https://app.tpstreams.com/api/v1/<organization_id>/assets/<asset_id>/drm_license/?access_token={{access_token}}\n")),(0,i.kt)("h3",{id:"usage"},"Usage:"),(0,i.kt)("p",null,"You can use this endpoint across web, Android and iOS players to retrieve the DRM license, passing the key message provided by the player in the payload. "),(0,i.kt)("p",null,"Please check this ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/harinath01/videojs-sample"},"repository")," for videojs sample code."),(0,i.kt)("h3",{id:"customize-widevine-license"},"Customize Widevine License:"),(0,i.kt)("p",null,'Customizing the Widevine license is entirely optional. If you choose not to customize it, simply pass the keyMessage provided by the player to the DRM license API in "application/octet-stream" format.'),(0,i.kt)("p",null,"If you prefer to tailor the Widevine license to your specific needs, include the desired configuration in the payload along with the player key message when making a request to the DRM License API."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Sample Payload:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},"{\n    \"player_payload\": btoa(keyMessage),\n    \"widevine\": {\n        \"content_key_specs\": [\n            {'track_type': 'SD', 'security_level': 1, 'required_output_protection': {'hdcp': 'HDCP_V1'}},\n            {'track_type': 'HD', 'security_level': 1, 'required_output_protection': {'hdcp': 'HDCP_V1'}},\n            {'track_type': 'UHD1', 'security_level': 1, 'required_output_protection': {'hdcp': 'HDCP_V1'}},\n            {'track_type': 'UHD2', 'security_level': 1, 'required_output_protection': {'hdcp': 'HDCP_V1'}},\n            {'track_type': 'AUDIO', 'security_level': 1, 'required_output_protection': {'hdcp': 'HDCP_V1'}}\n        ]\n    }\n}\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Breakdown:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"We encode the player license key message into base64 as JSON cannot include byte data directly."),(0,i.kt)("li",{parentName:"ul"},"The license specification is passed in the license_specs field. Inside this field, we specify content_key_specs, where we define the output protection details such as HDCP enforcement and Widevine security level for each track. For more details on available HDCP enforcement and Widevine security levels, please refer to the documentation ",(0,i.kt)("a",{parentName:"li",href:"https://static.testpress.in/static/docs/Widevine_Integration.pdf"},"here"),".")),(0,i.kt)("h2",{id:"security-considerations"},"Security Considerations:"),(0,i.kt)("p",null,"The recommendation is to invoke the DRM license endpoint on the server, rather than on the client. This precaution is taken because passing the License configuration and calling it from the client could expose configurations to users."))}u.isMDXComponent=!0}}]);